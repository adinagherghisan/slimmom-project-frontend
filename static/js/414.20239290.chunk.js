"use strict";(self.webpackChunkslimmom_project_frontend=self.webpackChunkslimmom_project_frontend||[]).push([[414],{3414:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var n=r(9439),i=r(2791),u={},c=r(5861),s=r(4687),a=r.n(s),d={},o=r(4420),l=r(84),p=r(5297),m=r(5705),h=r(8007),A=function(e){return e.search.products},f=r(184);var g=function(){var e=(0,o.I0)(),t=(0,o.v9)(A),r=(0,i.useState)(""),u=(0,n.Z)(r,2),s=u[0],g=u[1],v=(0,i.useState)(null),x=(0,n.Z)(v,2),j=x[0],N=x[1],S=function(e,t){var r=(0,i.useState)(e),u=(0,n.Z)(r,2),c=u[0],s=u[1];return(0,i.useEffect)((function(){var r=setTimeout((function(){s(e)}),t);return function(){clearTimeout(r)}}),[e,t]),c}(s,500);(0,i.useEffect)((function(){S&&e((0,p.t)({query:S}))}),[S,e]);var I=function(){var t=(0,c.Z)(a().mark((function t(r,n){var i,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.resetForm,!j||!r.productWeight){t.next=9;break}return t.next=4,e((0,l.dg)({productId:j._id,product_weight:r.productWeight}));case 4:u=(new Date).toISOString().split("T")[0],e((0,l.aP)({date:u})),i(),N(null),g("");case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return(0,f.jsx)("div",{children:(0,f.jsx)(m.J9,{initialValues:{productQuery:s,productWeight:""},validationSchema:h.Ry({productQuery:h.Z_().required("Enter a product name"),productWeight:h.Rx().typeError("Weight must be a number").positive("Weight must be greater than zero").required("Product weight is required")}),onSubmit:I,children:function(e){var r=e.isSubmitting,n=e.setFieldValue;return(0,f.jsxs)(m.l0,{children:[(0,f.jsxs)("div",{className:d.FieldGroup,children:[(0,f.jsx)(m.gN,{type:"text",name:"productQuery",placeholder:"Enter product name",className:d.inputField,value:s,onChange:function(e){g(e.target.value),n("productQuery",e.target.value)}}),(0,f.jsx)(m.Bc,{name:"productQuery",component:"div",className:d.error})]}),t&&t.length>0&&s&&(0,f.jsx)("div",{className:d.results,children:(0,f.jsx)("ul",{children:t.map((function(e){return(0,f.jsx)("li",{onClick:function(){return function(e){N(e),g(e.title)}(e)},className:(null===j||void 0===j?void 0:j._id)===e._id?d.selected:"",children:e.title},e._id)}))})}),(0,f.jsxs)("div",{children:[(0,f.jsx)(m.gN,{type:"number",name:"productWeight",placeholder:"Grams",className:d.inputField}),(0,f.jsx)(m.Bc,{name:"productWeight",component:"div",className:d.error})]}),(0,f.jsx)("div",{className:d.FieldGroup,children:(0,f.jsx)("button",{type:"submit",disabled:r||!j,children:(0,f.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABFSURBVHgB7dJBCgAgCETRIbr/lexmRuBCqkUGEsE8cCXyNwJEnqrKGGRRE7kpSMbAXcC+ZeH2O3IceIZv+megIqaBaNYBEVtHkRpg5okAAAAASUVORK5CYII=",alt:"Add product"})})})]})}})})},v={},x={},j=function(e){var t=e.product,r=e.onDelete,n=t.productId,i=t.product_weight,u=t.product_Calories;return(0,f.jsxs)("div",{className:x.productItem,children:[(0,f.jsx)("h4",{children:n.title}),(0,f.jsxs)("p",{children:[" ",i,"g"]}),(0,f.jsxs)("p",{children:[" ",u," kcal"]}),(0,f.jsx)("button",{type:"button",onClick:r,className:x.btnDelete,children:"X"})]})},N=function(e){var t=e.consumedProducts,r=e.selectedDate,n=(0,o.I0)();return(0,f.jsx)("div",{className:v.wrapperList,children:0===t.length?(0,f.jsx)("p",{children:"No products consumed for this date."}):t.map((function(e){return(0,f.jsx)(j,{product:e,onDelete:function(){return function(e){var t=r.toISOString();n((0,l.V9)({date:t,productId:e}))}(e._id)}},e._id)}))})},S=function(e){return e.diary.consumedProducts},I=function(e){return e.diary.isLoading},b=function(e){return e.diary.error},y=r(8978),C={},w=function(e){var t=e.selectedDate,r=e.handleDateChange;return(0,f.jsx)("div",{className:C.datePicker,children:(0,f.jsx)("input",{type:"date",value:t.toISOString().split("T")[0],onChange:r})})},E=function(){var e=(0,o.v9)(S);console.log("consumed products:",e);var t=(0,o.v9)(I),r=(0,o.v9)(b),c=(0,o.I0)(),s=(0,i.useState)(new Date),a=(0,n.Z)(s,2),d=a[0],p=a[1];(0,i.useEffect)((function(){var e=d.toISOString().split("T")[0];c((0,l.aP)({date:e}))}),[d,c]);return t?(0,f.jsx)(y.Z,{}):r?(0,f.jsxs)("p",{children:["Error: ",r]}):(0,f.jsxs)("div",{className:u.wrapper,children:[(0,f.jsx)(w,{selectedDate:d,handleDateChange:function(e){p(new Date(e.target.value))}}),(0,f.jsx)(g,{}),e&&(0,f.jsx)(N,{consumedProducts:e,selectedDate:d})]})}}}]);
//# sourceMappingURL=414.20239290.chunk.js.map